<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.zerock.mapper.MemberMapper">

<select id="login" resultType="LoginDTO">
	SELECT * FROM b_member WHERE email = #{email}
</select>

<insert id="join" >
	INSERT INTO b_member(email, pw, name, hp, addr, age, money)
	VALUES(#{email}, #{pw}, #{name}, #{hp}, #{addr}, #{age}, 0)
</insert>

<select id="checkEmail" resultType="String">
	SELECT email FROM b_member WHERE email = #{email}
</select>

<update id="createAuthKey">
	UPDATE b_member SET user_authCode = #{user_authCode} WHERE email = #{email}
</update>

<update id="userAuth">
	UPDATE b_member SET user_authStatus = '1' WHERE email = #{email}
</update>

<select id="selectUserAuth" resultType="String">
	SELECT user_authStatus FROM b_member WHERE email = #{email}
</select>

<select id="selectCryptPw" resultType="String">
	SELECT pw FROM b_member WHERE email = #{email}
</select>

<!-- 아이디 찾기시 아이디를 넘겨주는 쿼리 -->
<select id="searchId" resultType="String">
	SELECT email FROM b_member WHERE hp = #{newHp} AND name = #{name} AND age = #{age}
</select>

<update id="setPw">
	UPDATE b_member SET pw = #{pw} WHERE email = #{email}
</update>

</mapper>